{% layout "layouts/root.html" %}

<!-- Docs Navigation -->
<nav class="docs-nav fixed top-0 w-full border-b border-border bg-background/80 backdrop-blur-sm z-50">
    <div class="w-full px-4 md:px-6 h-16 flex items-center justify-between">
        <div class="flex items-center gap-4 md:gap-6">
            <!-- Mobile Menu Toggle -->
            <button id="docs-menu-toggle" class="md:hidden w-10 h-10 flex items-center justify-center rounded-md hover:bg-accent transition-colors" aria-label="Toggle menu">
                <svg id="menu-icon-open" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
                <svg id="menu-icon-close" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <a href="/" class="font-semibold flex items-center gap-2">
                <span class="text-xl">ðŸ¦€</span>
                <span class="hidden sm:inline">Rust Pure Web</span>
            </a>
            <span class="text-muted-foreground hidden sm:inline">/</span>
            <span class="text-muted-foreground hidden sm:inline">Documentation</span>
        </div>
        <div class="flex gap-4 md:gap-6 text-sm text-muted-foreground">
            <a href="/" class="hover:text-foreground transition-colors">Home</a>
            <a href="https://github.com/olibuijr/rust_pure_web" class="hover:text-foreground transition-colors hidden sm:inline">GitHub</a>
        </div>
    </div>
</nav>

<!-- Mobile Overlay -->
<div id="docs-overlay" class="fixed inset-0 bg-black/50 z-30 hidden md:hidden" aria-hidden="true"></div>

<div class="pt-16 flex">
    <!-- Sidebar -->
    <aside id="docs-sidebar" class="docs-sidebar w-64 fixed left-0 top-16 bottom-0 border-r border-border bg-background overflow-y-auto p-6 z-40 -translate-x-full md:translate-x-0 transition-transform duration-300">
        <nav class="space-y-6">
            <div>
                <h3 class="font-semibold text-sm mb-3">Getting Started</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="/docs" class="text-muted-foreground hover:text-foreground transition-colors {{ active_intro }}">Introduction</a></li>
                    <li><a href="/docs/installation" class="text-muted-foreground hover:text-foreground transition-colors {{ active_installation }}">Installation</a></li>
                    <li><a href="/docs/quick-start" class="text-muted-foreground hover:text-foreground transition-colors {{ active_quickstart }}">Quick Start</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-sm mb-3">Core Concepts</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="/docs/zero-dependency" class="text-muted-foreground hover:text-foreground transition-colors {{ active_zerodep }}">Zero Dependencies</a></li>
                    <li><a href="/docs/architecture" class="text-muted-foreground hover:text-foreground transition-colors {{ active_arch }}">Architecture</a></li>
                    <li><a href="/docs/server" class="text-muted-foreground hover:text-foreground transition-colors {{ active_server }}">HTTP Server</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-sm mb-3">Template Engine</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="/docs/templates" class="text-muted-foreground hover:text-foreground transition-colors {{ active_templates }}">Overview</a></li>
                    <li><a href="/docs/variables" class="text-muted-foreground hover:text-foreground transition-colors {{ active_vars }}">Variables</a></li>
                    <li><a href="/docs/loops" class="text-muted-foreground hover:text-foreground transition-colors {{ active_loops }}">Loops</a></li>
                    <li><a href="/docs/conditionals" class="text-muted-foreground hover:text-foreground transition-colors {{ active_cond }}">Conditionals</a></li>
                    <li><a href="/docs/includes" class="text-muted-foreground hover:text-foreground transition-colors {{ active_includes }}">Includes</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-sm mb-3">Backend</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="/docs/authentication" class="text-muted-foreground hover:text-foreground transition-colors {{ active_auth }}">Authentication</a></li>
                    <li><a href="/docs/database" class="text-muted-foreground hover:text-foreground transition-colors {{ active_database }}">Database</a></li>
                    <li><a href="/docs/api" class="text-muted-foreground hover:text-foreground transition-colors {{ active_api }}">API Reference</a></li>
                    <li><a href="/docs/crypto" class="text-muted-foreground hover:text-foreground transition-colors {{ active_crypto }}">Cryptography</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-sm mb-3">Frontend</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="/docs/components" class="text-muted-foreground hover:text-foreground transition-colors {{ active_comp }}">Components</a></li>
                    <li><a href="/docs/styling" class="text-muted-foreground hover:text-foreground transition-colors {{ active_style }}">Styling</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-sm mb-3">Advanced</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="/docs/routing" class="text-muted-foreground hover:text-foreground transition-colors {{ active_routing }}">Routing</a></li>
                    <li><a href="/docs/hot-reload" class="text-muted-foreground hover:text-foreground transition-colors {{ active_hotreload }}">Hot Reload</a></li>
                    <li><a href="/docs/deployment" class="text-muted-foreground hover:text-foreground transition-colors {{ active_deploy }}">Deployment</a></li>
                </ul>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="docs-content md:ml-64 flex-1 p-4 md:p-8 max-w-4xl content-enter" data-content-animate>
        {{ children }}
    </main>
</div>

<!-- Mobile Menu Script -->
<script>
(function() {
    var toggle = document.getElementById('docs-menu-toggle');
    var sidebar = document.getElementById('docs-sidebar');
    var overlay = document.getElementById('docs-overlay');
    var iconOpen = document.getElementById('menu-icon-open');
    var iconClose = document.getElementById('menu-icon-close');
    var isOpen = false;

    function openMenu() {
        isOpen = true;
        sidebar.classList.remove('-translate-x-full');
        overlay.classList.remove('hidden');
        iconOpen.classList.add('hidden');
        iconClose.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
        isOpen = false;
        sidebar.classList.add('-translate-x-full');
        overlay.classList.add('hidden');
        iconOpen.classList.remove('hidden');
        iconClose.classList.add('hidden');
        document.body.style.overflow = '';
    }

    toggle.addEventListener('click', function() {
        if (isOpen) {
            closeMenu();
        } else {
            openMenu();
        }
    });

    overlay.addEventListener('click', closeMenu);

    // Close menu when clicking a link (mobile)
    sidebar.querySelectorAll('a').forEach(function(link) {
        link.addEventListener('click', function() {
            if (window.innerWidth < 768) {
                closeMenu();
            }
        });
    });

    // Close menu on resize to desktop
    window.addEventListener('resize', function() {
        if (window.innerWidth >= 768 && isOpen) {
            closeMenu();
        }
    });
})();
</script>
